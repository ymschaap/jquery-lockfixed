!function(a,b){a.extend({lockfixed:function(b,c){c&&c.offset?(c.offset.bottom=parseInt(c.offset.bottom,10),c.offset.top=parseInt(c.offset.top,10),c.offset.right=parseInt(c.offset.right,10)):c.offset={bottom:100,top:0};var b=a(b);if(b&&b.offset()){var d=b.css("position"),e=parseInt(b.css("marginTop"),10)||0,f=b.css("top"),g=b.offset().top,h=!1,i=a(window).width()-(b.offset().left+b.outerWidth())+c.offset.right;(c.forcemargin===!0||navigator.userAgent.match(/\bMSIE (4|5|6)\./)||navigator.userAgent.match(/\bOS ([0-9])_/)||navigator.userAgent.match(/\bAndroid ([0-9])\./i))&&(h=!0),b.wrap("<div style='height:"+b.outerHeight()+"px;display:"+b.css("display")+"'></div>"),a(window).bind("DOMContentLoaded load scroll resize orientationchange lockfixed:pageupdate",b,function(j){if(!h||!document.activeElement||"INPUT"!==document.activeElement.nodeName){var k=0,l=b.outerHeight(),m=b.outerWidth(),n=a(document).height()-c.offset.bottom,o=a(window).scrollTop();"fixed"===b.css("position")||h||(g=b.offset().top,f=b.css("top")),o>=g-(e?e:0)-c.offset.top?(k=n<o+l+e+c.offset.top&&l+c.offset.top>a(window).height()?o+l+e+c.offset.top-n:0,h?b.css({marginTop:parseInt(o-g-k,10)+2*c.offset.top+"px"}):b.css({position:"fixed",top:c.offset.top-k+"px",width:m+"px",right:i+"px"})):b.css({position:d,top:f,width:m+"px",marginTop:(e&&!h?e:0)+"px",right:0})}})}}})}(jQuery);